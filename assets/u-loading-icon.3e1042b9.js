import{d as t,m as e,a as i,b as s,j as a,o,c as r,w as l,q as n,s as d,n as c,e as u,g as h,y as b,A as p,N as g,O as y,P as f,l as m,p as _,f as v,u as w,h as S,F as x,r as k,i as C,Q as T,R as N,T as B,U as I,V as z,W as $,X as R}from"./index-a22744b0.js";import{_ as L}from"./errorImg.f06d5c36.js";const O=L({name:"u-badge",mixins:[e,{props:{isDot:{type:Boolean,default:()=>t.badge.isDot},value:{type:[Number,String],default:()=>t.badge.value},modelValue:{type:[Number,String],default:()=>t.badge.modelValue},show:{type:Boolean,default:()=>t.badge.show},max:{type:[Number,String],default:()=>t.badge.max},type:{type:String,default:()=>t.badge.type},showZero:{type:Boolean,default:()=>t.badge.showZero},bgColor:{type:[String,null],default:()=>t.badge.bgColor},color:{type:[String,null],default:()=>t.badge.color},shape:{type:String,default:()=>t.badge.shape},numberType:{type:String,default:()=>t.badge.numberType},offset:{type:Array,default:()=>t.badge.offset},inverted:{type:Boolean,default:()=>t.badge.inverted},absolute:{type:Boolean,default:()=>t.badge.absolute}}},i],computed:{boxStyle:()=>({}),badgeStyle(){const t={};if(this.color&&(t.color=this.color),this.bgColor&&!this.inverted&&(t.backgroundColor=this.bgColor),this.absolute&&(t.position="absolute",this.offset.length)){const e=this.offset[0],i=this.offset[1]||e;t.top=s(e),t.right=s(i)}return t},showValue(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}}},methods:{addStyle:a}},[["render",function(t,e,i,s,a,p){const g=b;return t.show&&(0!==Number(t.value)||t.showZero||t.isDot)?(o(),r(g,{key:0,class:c([[t.isDot?"u-badge--dot":"u-badge--not-dot",t.inverted&&"u-badge--inverted","horn"===t.shape&&"u-badge--horn",`u-badge--${t.type}${t.inverted?"--inverted":""}`],"u-badge"]),style:u([p.addStyle(t.customStyle),p.badgeStyle])},{default:l((()=>[n(d(t.isDot?"":p.showValue),1)])),_:1},8,["class","style"])):h("",!0)}],["__scopeId","data-v-0e56696e"]]);const H=L({name:"u-tabs",mixins:[e,i,{props:{duration:{type:Number,default:()=>t.tabs.duration},list:{type:Array,default:()=>t.tabs.list},lineColor:{type:String,default:()=>t.tabs.lineColor},activeStyle:{type:[String,Object],default:()=>t.tabs.activeStyle},inactiveStyle:{type:[String,Object],default:()=>t.tabs.inactiveStyle},lineWidth:{type:[String,Number],default:()=>t.tabs.lineWidth},lineHeight:{type:[String,Number],default:()=>t.tabs.lineHeight},lineBgSize:{type:String,default:()=>t.tabs.lineBgSize},itemStyle:{type:[String,Object],default:()=>t.tabs.itemStyle},scrollable:{type:Boolean,default:()=>t.tabs.scrollable},current:{type:[Number,String],default:()=>t.tabs.current},keyName:{type:String,default:()=>t.tabs.keyName}}}],data:()=>({firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}),watch:{current:{immediate:!0,handler(t,e){t!==this.innerCurrent&&(this.innerCurrent=t,this.$nextTick((()=>{this.resize()})))}},list(){this.$nextTick((()=>{this.resize()}))}},computed:{textStyle(){return t=>{const e={},i=t===this.innerCurrent?a(this.activeStyle):uni.$u.addStyle(this.inactiveStyle);return this.list[t].disabled&&(e.color="#c8c9cc"),p(i,e)}},propsBadge:()=>t.badge},async mounted(){this.init()},emits:["click","change"],methods:{addStyle:a,addUnit:s,setLineLeft(){const t=this.list[this.innerCurrent];if(!t)return;let e=this.list.slice(0,this.innerCurrent).reduce(((t,e)=>t+e.rect.width),0);const i=g(this.lineWidth);this.lineOffsetLeft=e+(t.rect.width-i)/2,this.firstTime&&setTimeout((()=>{this.firstTime=!1}),10)},animation(t,e=0){},clickHandler(t,e){this.$emit("click",{...t,index:e}),t.disabled||(this.innerCurrent=e,this.resize(),this.$emit("change",{...t,index:e}))},init(){y().then((()=>{this.resize()}))},setScrollLeft(){const t=this.list[this.innerCurrent],e=this.list.slice(0,this.innerCurrent).reduce(((t,e)=>t+e.rect.width),0),i=f().windowWidth;let s=e-(this.tabsRect.width-t.rect.width)/2-(i-this.tabsRect.right)/2+this.tabsRect.left/2;s=Math.min(s,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,s)},resize(){0!==this.list.length&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then((([t,e=[]])=>{this.tabsRect=t,this.scrollViewWidth=0,e.map(((t,e)=>{this.scrollViewWidth+=t.width,this.list[e].rect=t})),this.setLineLeft(),this.setScrollLeft()}))},getTabsRect(){return new Promise((t=>{this.queryRect("u-tabs__wrapper__scroll-view").then((e=>t(e)))}))},getAllItemRect(){return new Promise((t=>{const e=this.list.map(((t,e)=>this.queryRect(`u-tabs__wrapper__nav__item-${e}`,!0)));Promise.all(e).then((e=>t(e)))}))},queryRect(t,e){return new Promise((e=>{this.$uGetRect(`.${t}`).then((t=>{e(t)}))}))}}},[["render",function(t,e,i,s,a,h){const p=b,g=m(_("u-badge"),O),y=C,f=T;return o(),r(y,{class:"u-tabs"},{default:l((()=>[v(y,{class:"u-tabs__wrapper"},{default:l((()=>[w(t.$slots,"left",{},void 0,!0),v(y,{class:"u-tabs__wrapper__scroll-view-wrapper"},{default:l((()=>[v(f,{"scroll-x":t.scrollable,"scroll-left":a.scrollLeft,"scroll-with-animation":"",class:"u-tabs__wrapper__scroll-view","show-scrollbar":!1,ref:"u-tabs__wrapper__scroll-view"},{default:l((()=>[v(y,{class:"u-tabs__wrapper__nav",ref:"u-tabs__wrapper__nav"},{default:l((()=>[(o(!0),S(x,null,k(t.list,((e,i)=>(o(),r(y,{class:c(["u-tabs__wrapper__nav__item",[`u-tabs__wrapper__nav__item-${i}`,e.disabled&&"u-tabs__wrapper__nav__item--disabled"]]),key:i,onClick:t=>h.clickHandler(e,i),ref_for:!0,ref:`u-tabs__wrapper__nav__item-${i}`,style:u([h.addStyle(t.itemStyle),{flex:t.scrollable?"":1}])},{default:l((()=>[v(p,{class:c([[e.disabled&&"u-tabs__wrapper__nav__item__text--disabled"],"u-tabs__wrapper__nav__item__text"]),style:u([h.textStyle(i)])},{default:l((()=>[n(d(e[t.keyName]),1)])),_:2},1032,["class","style"]),v(g,{show:!(!e.badge||!(e.badge.show||e.badge.isDot||e.badge.value)),isDot:e.badge&&e.badge.isDot||h.propsBadge.isDot,value:e.badge&&e.badge.value||h.propsBadge.value,max:e.badge&&e.badge.max||h.propsBadge.max,type:e.badge&&e.badge.type||h.propsBadge.type,showZero:e.badge&&e.badge.showZero||h.propsBadge.showZero,bgColor:e.badge&&e.badge.bgColor||h.propsBadge.bgColor,color:e.badge&&e.badge.color||h.propsBadge.color,shape:e.badge&&e.badge.shape||h.propsBadge.shape,numberType:e.badge&&e.badge.numberType||h.propsBadge.numberType,inverted:e.badge&&e.badge.inverted||h.propsBadge.inverted,customStyle:"margin-left: 4px;"},null,8,["show","isDot","value","max","type","showZero","bgColor","color","shape","numberType","inverted"])])),_:2},1032,["onClick","style","class"])))),128)),v(y,{class:"u-tabs__wrapper__nav__line",ref:"u-tabs__wrapper__nav__line",style:u([{width:h.addUnit(t.lineWidth),transform:`translate(${a.lineOffsetLeft}px)`,transitionDuration:`${a.firstTime?0:t.duration}ms`,height:h.addUnit(t.lineHeight),background:t.lineColor,backgroundSize:t.lineBgSize}])},null,8,["style"])])),_:1},512)])),_:1},8,["scroll-x","scroll-left"])])),_:1}),w(t.$slots,"right",{},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-9aa5a8f9"]]);const W=L({name:"u-sticky",mixins:[e,i,{props:{offsetTop:{type:[String,Number],default:()=>t.sticky.offsetTop},customNavHeight:{type:[String,Number],default:44},disabled:{type:Boolean,default:()=>t.sticky.disabled},bgColor:{type:String,default:()=>t.sticky.bgColor},zIndex:{type:[String,Number],default:()=>t.sticky.zIndex},index:{type:[String,Number],default:()=>t.sticky.index}}}],data:()=>({cssSticky:!1,stickyTop:0,elId:N(),left:0,width:"auto",height:"auto",fixed:!1}),computed:{style(){const t={};return this.disabled?t.position="static":this.cssSticky?(t.position="sticky",t.zIndex=this.uZindex,t.top=s(this.stickyTop)):t.height=this.fixed?this.height+"px":"auto",t.backgroundColor=this.bgColor,p(a(this.customStyle),t)},stickyContent(){const t={};return this.cssSticky||(t.position=this.fixed?"fixed":"static",t.top=this.stickyTop+"px",t.left=this.left+"px",t.width="auto"==this.width?"auto":this.width+"px",t.zIndex=this.uZindex),t},uZindex(){return this.zIndex?this.zIndex:B.sticky}},mounted(){this.init()},methods:{init(){this.getStickyTop(),this.checkSupportCssSticky(),this.cssSticky||!this.disabled&&this.initObserveContent()},initObserveContent(){this.$uGetRect("#"+this.elId).then((t=>{this.height=t.height,this.left=t.left,this.width=t.width,this.$nextTick((()=>{this.observeContent()}))}))},observeContent(){this.disconnectObserver("contentObserver");const t=I({thresholds:[.95,.98,1]});t.relativeToViewport({top:-this.stickyTop}),t.observe(`#${this.elId}`,(t=>{this.setFixed(t.boundingClientRect.top)})),this.contentObserver=t},setFixed(t){const e=t<=this.stickyTop;this.fixed=e},disconnectObserver(t){const e=this[t];e&&e.disconnect()},getStickyTop(){this.stickyTop=g(this.offsetTop)+g(this.customNavHeight)},async checkSupportCssSticky(){this.checkCssStickyForH5()&&(this.cssSticky=!0),"android"===z()&&Number(f().system)>8&&(this.cssSticky=!0),"ios"===z()&&(this.cssSticky=!0)},checkComputedStyle(){},checkCssStickyForH5(){const t=["","-webkit-","-ms-","-moz-","-o-"],e=t.length,i=document.createElement("div");for(let s=0;s<e;s++)if(i.style.position=t[s]+"sticky",""!==i.style.position)return!0;return!1}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(t,e,i,s,a,n){const d=C;return o(),r(d,{class:"u-sticky",id:a.elId,style:u([n.style])},{default:l((()=>[v(d,{style:u([n.stickyContent]),class:"u-sticky__content"},{default:l((()=>[w(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["id","style"])}],["__scopeId","data-v-dbb1d77f"]]);const D=L({name:"u-loading-icon",mixins:[e,i,{props:{show:{type:Boolean,default:()=>t.loadingIcon.show},color:{type:String,default:()=>t.loadingIcon.color},textColor:{type:String,default:()=>t.loadingIcon.textColor},vertical:{type:Boolean,default:()=>t.loadingIcon.vertical},mode:{type:String,default:()=>t.loadingIcon.mode},size:{type:[String,Number],default:()=>t.loadingIcon.size},textSize:{type:[String,Number],default:()=>t.loadingIcon.textSize},text:{type:[String,Number],default:()=>t.loadingIcon.text},timingFunction:{type:String,default:()=>t.loadingIcon.timingFunction},duration:{type:[String,Number],default:()=>t.loadingIcon.duration},inactiveColor:{type:String,default:()=>t.loadingIcon.inactiveColor}}}],data:()=>({array12:Array.from({length:12}),aniAngel:360,webviewHide:!1,loading:!1}),computed:{otherBorderColor(){const t=$(this.color,"#ffffff",100)[80];return"circle"===this.mode?this.inactiveColor?this.inactiveColor:t:"transparent"}},watch:{show(t){}},mounted(){this.init()},methods:{addUnit:s,addStyle:a,init(){setTimeout((()=>{}),20)},addEventListenerToWebview(){const t=R(),e=t[t.length-1].$getAppWebview();e.addEventListener("hide",(()=>{this.webviewHide=!0})),e.addEventListener("show",(()=>{this.webviewHide=!1}))}}},[["render",function(t,e,i,s,a,p){const g=C,y=b;return t.show?(o(),r(g,{key:0,class:c(["u-loading-icon",[t.vertical&&"u-loading-icon--vertical"]]),style:u([p.addStyle(t.customStyle)])},{default:l((()=>[a.webviewHide?h("",!0):(o(),r(g,{key:0,class:c(["u-loading-icon__spinner",[`u-loading-icon__spinner--${t.mode}`]]),ref:"ani",style:u({color:t.color,width:p.addUnit(t.size),height:p.addUnit(t.size),borderTopColor:t.color,borderBottomColor:p.otherBorderColor,borderLeftColor:p.otherBorderColor,borderRightColor:p.otherBorderColor,"animation-duration":`${t.duration}ms`,"animation-timing-function":"semicircle"===t.mode||"circle"===t.mode?t.timingFunction:""})},{default:l((()=>["spinner"===t.mode?(o(!0),S(x,{key:0},k(a.array12,((t,e)=>(o(),r(g,{key:e,class:"u-loading-icon__dot"})))),128)):h("",!0)])),_:1},8,["class","style"])),t.text?(o(),r(y,{key:1,class:"u-loading-icon__text",style:u({fontSize:p.addUnit(t.textSize),color:t.textColor})},{default:l((()=>[n(d(t.text),1)])),_:1},8,["style"])):h("",!0)])),_:1},8,["style","class"])):h("",!0)}],["__scopeId","data-v-c4ca16aa"]]);export{D as _,H as a,W as b};
